# 2026-01-28 — Dev Log (ai-cs-ticketgen)

## 오늘의 목표
- CS 문의 원문을 입력하면 개발팀이 바로 착수할 수 있는 “티켓 초안”을 자동 생성하는 MVP 구현
- 빠른 바이브코딩으로 MVP를 만들되, 유지보수를 위해 MVC-ish 구조로 계층 분리
- GitHub에 소스/문서/로그를 올려 관리 체계 정착

---

## 작업 내용 (What I did)

### 1) 로컬 실행 환경 점검
- venv에서 Python 경로 확인 (`where python`)
- Python 버전 확인 (3.13.x)
- `python-dotenv` 설치 여부 확인 (`pip show python-dotenv`)

### 2) Streamlit 실행/모듈 이슈 해결
- Streamlit 실행 중 `ModuleNotFoundError: No module named 'dotenv'` 발생
- 원인: Streamlit이 venv가 아닌 전역 Python/streamlit을 사용한 정황
- 해결:
  - 실행 방식을 `python -m streamlit run app.py`로 고정
  - `where streamlit`로 전역/venv 경로 혼재 확인

### 3) UI/출력 포맷 개선
- 탭 구성: Markdown / JSON / Plain(복사용)
- Plain(복사용) 영역에서 **오른쪽 텍스트 잘림** 이슈 발생 → 줄바꿈/워드랩 되도록 수정
- Markdown 표시 방식 변경 요구사항 반영:
  - `[초안]...`로 시작하는 헤더 제거
  - `모듈/유형/긴급도`를 큰 헤더 스타일로 표시
  - `요약` 타이틀을 `문의사항`으로 변경
  - 불필요한 상단 큰 제목(빨간 박스 영역) 제거

### 4) MVC-ish 구조로 리팩토링 (유지보수 관점)
- 유지보수 중요성을 체감 → 역할/의존성 분리 필요 확인
- 폴더를 레이어별로 분리(컨트롤러/서비스/도메인/렌더러)

### 5) 패키지 인식 오류 해결
- `ModuleNotFoundError: No module named 'services'` 발생
- 조치:
  - 각 폴더에 `__init__.py` 추가
  - 최종 원인: `services` 폴더명 오타(또는 폴더 구조/명 불일치)
  - 폴더명 정정 후 정상 실행 확인

### 6) GitHub 업로드/인증 이슈 해결
- 기존 remote 권한 오류(403) 발생:
  - `Permission to ... denied to kimchanj` 메시지 확인
  - PC에 저장된 인증 계정/권한과 repo 소유 계정 불일치 문제 인지
- 한 PC에서 여러 GitHub 계정 사용 방법(SSH/Host alias 등) 개념 이해 및 시도
- 최종적으로 **kimchanj 계정에 repo 생성 후 push 성공**
  - repo: `kimchanj/ai-cs-ticketgen`

### 7) gitignore/로컬 산출물 정리
- `.idea`, `__pycache__`, `.venv` 같은 로컬/IDE 아티팩트를 추적에서 제거하려 시도
- `rejected (fetch first)` 및 rebase 충돌 상황 경험
- 원인: 원격에 이미 커밋이 존재 + 로컬 untracked 파일이 checkout에 의해 덮어써질 수 있음
- 해결 흐름:
  - 원격 상태를 먼저 pull(rebase)하려 했으나 untracked 파일 충돌
  - 불필요 파일 정리/추적 제외를 반영한 커밋을 정리하여 최종적으로 원격에 반영(푸시 성공 화면 확인)

---

## 변경 요약 (Diff Summary)

### Added
- Streamlit MVP UI (CS 입력 → Generate → Markdown/JSON/Plain 출력)
- MVC-ish 폴더 구조:
  - `controllers/`
  - `services/`
  - `domain/`
  - `renderers/`
- 문서/가이드(README, 유지보수 맵 등)
- requirements/pyproject 기반 의존성 관리(프로젝트에 포함됨)

### Modified
- Markdown 출력 포맷(타이틀/헤더 구조) 개선
- Plain(복사용) 출력 스타일(줄바꿈/워드랩) 개선
- 실행 명령/환경 고정 방식 정리

### Removed / Ignored
- `.idea/`, `__pycache__/`, `.venv/` 등 로컬 산출물 추적 제거/ignore 방향 확립

---

## 의사결정 (Decisions)
- “빠르게 만들기”는 가능하지만 “수정/확장”의 비용이 커짐을 체감
- 유지보수 우선 → MVC-ish 구조로 계층 분리(역할 기준으로 파일 위치를 정한다)
- Streamlit 실행은 항상 아래로 고정(venv 보장):
  - `python -m streamlit run app.py`
- 문서/로그를 GitHub에 남겨 재현성과 유지보수성을 확보한다

---

## 이슈/해결 (Issues & Fix)

### 1) dotenv 모듈 없음 오류
- 문제: `ModuleNotFoundError: No module named 'dotenv'`
- 원인: 전역 Python/streamlit이 실행되어 venv 패키지가 안 보임
- 해결: `python -m streamlit run app.py`로 실행 고정

### 2) services 모듈 없음 오류
- 문제: `ModuleNotFoundError: No module named 'services'`
- 원인: 폴더명 오타/패키지 인식 문제
- 해결: 폴더명 정정 + `__init__.py` 보강 → 정상 실행

### 3) GitHub push 403 / publickey / 계정 꼬임
- 문제: 계정/권한 불일치로 push 실패
- 해결: repo를 실제 인증된 계정(kimchanj)으로 생성하여 push 성공
  - (추후 목적에 따라 SSH config로 계정 분리 운영 가능)

### 4) rebase/push 충돌 + untracked 덮어쓰기 경고
- 문제: `rejected (fetch first)` / `untracked working tree files would be overwritten`
- 원인: 원격 커밋 존재 + 로컬에 추적되지 않은 IDE/캐시 파일 존재
- 해결: 로컬 불필요 파일 정리 + ignore 정책 확립 후 정상 반영

---

## 배운 점 (Learnings)
- 바이브코딩은 MVP 생산성이 압도적이지만, 디테일 수정은 “코드 구조 이해”가 필요하다
- 유지보수의 핵심은 “역할 분리 + 의존성 규칙”이다(= 어디를 고쳐야 하는지 바로 찾기)
- Python/Streamlit은 venv/전역 실행이 쉽게 섞인다 → 실행 명령을 표준화해야 한다
- Git은 “원격이 기준”인 상황이 많다 → pull/rebase 전에 로컬 untracked 정리가 중요하다
- 문서(.md)를 같이 관리하면, 나중에 기능 추가/수정 시 판단이 빨라진다

---

## 다음 할 일 (Next)
- [ ] docs/ARCHITECTURE.md / docs/TROUBLESHOOTING.md / CHANGELOG.md 정식 도입
- [ ] logs/ 폴더에 날짜별 개발일지 계속 기록
- [ ] 입력 폼(세부 필드/검증/템플릿) 확장(B단계)
- [ ] 티켓 유형 분류(버그/요청/문의) 자동 판별 규칙 강화
- [ ] LLM 프롬프트/정규화 규칙을 서비스 레이어에서 체계화

---

## 참고/링크
- Repo: https://github.com/kimchanj/ai-cs-ticketgen
- 실행: `python -m streamlit run app.py`
